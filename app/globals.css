@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------------------------------------------------------------------
   Base: international & mobile-first
   - Font scaling (100% = user preference), 16px minimum on inputs (prevents iOS zoom)
   - Safe areas for notched devices (iOS/Android)
   - Touch-friendly tap highlight, smooth scroll
   - Reduced motion for accessibility (WCAG 2.3.3)
--------------------------------------------------------------------------- */
@layer base {
  html {
    font-size: 100%;
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  body {
    @apply bg-white text-slate-800 antialiased;
    min-height: 100dvh;
    min-height: 100vh;
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* 44px+ touch targets (WCAG 2.5.5, iOS HIG); 48px used for primary controls */
  button,
  [role="button"] {
    @apply min-h-[48px] min-w-[48px] inline-flex items-center justify-center;
  }

  /* 16px minimum on inputs prevents iOS zoom on focus (improves mobile UX) */
  input,
  select,
  textarea {
    font-size: 16px !important;
  }

  @media (min-width: 768px) {
    input,
    select,
    textarea {
      font-size: inherit;
    }
  }

  /* Visible focus for keyboard users (WCAG 2.4.7) */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-trust-blue;
  }

  /* Subtle tap highlight on touch devices (Android/iOS) */
  a,
  button,
  [role="button"],
  input,
  select,
  textarea,
  label[for] {
    -webkit-tap-highlight-color: rgba(102, 43, 98, 0.12);
    tap-highlight-color: rgba(102, 43, 98, 0.12);
  }
}

@layer utilities {
  .animate-shimmer {
    animation: shimmer 1.5s ease-in-out infinite;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-shimmer {
      animation: none;
    }
  }
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@layer components {
  .touch-target {
    @apply min-h-touch-target min-w-touch-target;
  }

  /* Safe areas: notched devices (iPhone X+, Android with display cutout) */
  .pt-safe {
    padding-top: calc(1rem + env(safe-area-inset-top, 0px));
  }

  .pb-safe {
    padding-bottom: calc(1rem + env(safe-area-inset-bottom, 0px));
  }

  /* Smooth momentum scroll on iOS */
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
  }
}
